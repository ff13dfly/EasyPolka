(()=>{var g={error:"\x1B[36m%s\x1B[0m",success:"\x1B[36m%s\x1B[0m",anchor:"plinth",server:"ws://127.0.0.1:9944",version:"1.0.2",step:300},$=LP,E=$.ApiPromise,R=$.WsProvider,p=LA,C=LE.easyRun,v=null,n={auto:o=>{if(v!==null)return o&&o();n.step(`Ready to link to server ${f}.`,()=>{E.create({provider:new R(f)}).then(t=>{n.step(`Linker to node [${f}] created.`,()=>(v=t,p.set(t),o&&o()))})})},decoder:o=>{let t={anchor:g.anchor,server:g.server,block:0},e=o.charAt(o.length-1);if(!o||e!=="#")return t;let r=o.split("@");if(r.length===1)t.anchor=r[0].substring(1),t.anchor=t.anchor.substring(0,t.anchor.length-1);else{t.server=r.pop(),t.server=t.server.substring(0,t.server.length-1);let c=r.join("@");t.anchor=c.substring(1)}let s=o.split("|");if(s.length===2){let c=parseInt(s[1]);!isNaN(c)&&c>0&&(t.block=c),t.anchor=s[0].substring(1)}return t.anchor=decodeURIComponent(t.anchor),t},html:(o,t)=>{let e=document.getElementById(t),r=document.createTextNode(o);e.innerHTML="",e.appendChild(r)},version:(o,t)=>{let e=document.getElementsByClassName(t);for(let r=0;r<e.length;r++){let s=e[r],c=document.createTextNode(o);s.innerHTML="",s.appendChild(c)}},hide:o=>{if(Array.isArray(o))for(let t=0;t<o.length;t++){let e=document.getElementById(o[t]);e.style.display="none"}else{let t=document.getElementById(o);t.style.display="none"}},step:(o,t,e)=>{let r="step",s=document.getElementById(r),c=document.createTextNode(`[${n.stamp()}] ${o}`),l=document.createElement("br");s.appendChild(c),s.appendChild(l),setTimeout(t,e||g.step)},stamp:()=>new Date().toLocaleString(),groupResource:o=>{let t={},e={},r={};for(let l=0;l<o.length;l++){let i=o[l];if(i.raw!==null)try{let a=JSON.parse(i.raw);for(var s in a){t[s]=a[s];let d=s.split("_");d.length===2?(e[d[0]]||(e[d[0]]=[]),e[d[0]].push(parseInt(d[1])),r[d[0]]=i.name):e[s]=i.name}}catch(a){console.log(a)}}let c={};for(let l in e)if(!Array.isArray(e[l]))c[`${e[l]}|${l}`]=t[l];else{let i="";for(let a=0;a<e[l].length;a++)i+=t[`${l}_${a}`];c[`${r[l]}|${l}`]=i}return c}},u=n.decoder(location.hash),b=`anchor://${u.anchor}/`;u.block!==0&&(b+=u.block);var f=u.server;console.log(b);n.version(g.version,"ver");n.step(`Anchor Network server ${f}`,()=>{let o=u.block!==0?`Ready to load ${u.anchor} on ${u.block}`:`Ready to load the latest ${u.anchor}`;n.step(o,()=>{n.auto(()=>{let t={common:{latest:p.latest,target:p.target,history:p.history,owner:p.owner,subcribe:p.subcribe,multi:p.multi,block:p.block},agent:{process:e=>{n.step(e)}}};n.step("Anchor decoded, ready to load.",()=>{C(b,t,e=>{if(e.error&&e.error.length!==0){let r="";for(let s=0;s<e.error.length;s++){let c=e.error[s];r+=`${c.level?c.level+":":""}${c.error}`}return n.step(r),delete e.error,n.step(`Result: ${JSON.stringify(e)}`),!1}n.step("Ready to show details",()=>{let r=e.location[1],s=e.location[0],c=`${s}_${r}`,l=e.data[c];if(n.html(`${s} on ${r.toLocaleString()}, signed by ${l.signer}`,"more"),!(e.call!==void 0||l.protocol.type==="app"))return n.step("Not application Anchor, the data as follow: ",()=>{n.step(`${JSON.stringify(l)}`)});n.step("Load successful,ready to run.",()=>{let i=e.libs&&e.libs.js?e.libs.js:"",a=e.code?e.code:"";if(e.resource&&e.raw){n.step("Combining the resouce files to application.");let h=n.groupResource(e.raw);for(var d in h)a=a.replaceAll(`anchor://${d}`,h[d])}try{let h=new Function("API","input","errs",i+a),A={container:"root",from:null,params:{},node:u.server},w={anchorJS:p},m=3;n.step(`Application loaded, run in ${m}s.`);let N=setInterval(()=>{if(m--,n.step(`Application loaded, run in ${m}s.`),m<0){if(clearInterval(N),e.libs&&e.libs.css){let k=e.libs.css,I=document.getElementsByTagName("head")[0],y=document.createElement("style"),x=document.createTextNode(k);y.appendChild(x),I.appendChild(y)}n.hide(["step","info"]),h(w,A,[])}},1e3)}catch(h){n.step("Failed to load cApp."),n.step(`Error: ${h}`)}})})})})})})});})();
//!important, This is the loader of launcher such as `Plinth`.
//!important, Need to build, the index.html not support hight version JS
