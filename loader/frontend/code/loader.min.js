(()=>{var h={error:"\x1B[36m%s\x1B[0m",success:"\x1B[36m%s\x1B[0m",anchor:"plinth",server:"ws://127.0.0.1:9944",version:"1.0.2",step:300},$=LP,E=$.ApiPromise,x=$.WsProvider,d=LA,L=LE.easyRun,b=null,n={auto:o=>{if(b!==null)return o&&o();n.step(`Ready to link to server ${f}.`,()=>{E.create({provider:new x(f)}).then(e=>{n.step(`Linker to node [${f}] created.`,()=>(b=e,d.set(e),o&&o()))})})},decoder:o=>{let e={anchor:h.anchor,server:h.server,block:0};if(!o)return e;let t=o.split("@");if(t.length===1)e.anchor=t[0].substring(1);else{e.server=t.pop();let r=t.join("@");e.anchor=r.substring(1)}let s=o.split("|");if(s.length===2){let r=parseInt(s[1]);!isNaN(r)&&r>0&&(e.block=r),e.anchor=s[0].substring(1)}return e},html:(o,e)=>{let t=document.getElementById(e),s=document.createTextNode(o);t.innerHTML="",t.appendChild(s)},version:(o,e)=>{let t=document.getElementsByClassName(e);for(let s=0;s<t.length;s++){let r=t[s],a=document.createTextNode(o);r.innerHTML="",r.appendChild(a)}},hide:o=>{if(Array.isArray(o))for(let e=0;e<o.length;e++){let t=document.getElementById(o[e]);t.style.display="none"}else{let e=document.getElementById(o);e.style.display="none"}},step:(o,e,t)=>{let s="step",r=document.getElementById(s),a=document.createTextNode(`[${n.stamp()}] ${o}`),c=document.createElement("br");r.appendChild(a),r.appendChild(c),setTimeout(e,t||h.step)},stamp:()=>new Date().toLocaleString(),groupResource:o=>{let e={},t={},s={};for(let c=0;c<o.length;c++){let i=o[c];if(i.raw!==null)try{let p=JSON.parse(i.raw);for(var r in p){e[r]=p[r];let l=r.split("_");l.length===2?(t[l[0]]||(t[l[0]]=[]),t[l[0]].push(parseInt(l[1])),s[l[0]]=i.name):t[r]=i.name}}catch(p){console.log(p)}}let a={};for(let c in t)if(!Array.isArray(t[c]))a[`${t[c]}|${c}`]=e[c];else{let i="";for(let p=0;p<t[c].length;p++)i+=e[`${c}_${p}`];a[`${s[c]}|${c}`]=i}return a}},u=n.decoder(location.hash),g=`anchor://${u.anchor}/`;u.block!==0&&(g+=u.block);var f=u.server;console.log(g);n.version(h.version,"ver");n.step(`Anchor Network server ${f}`,()=>{n.step(`Ready to load ${u.anchor}`,()=>{n.auto(()=>{let o={common:{latest:d.latest,target:d.target,history:d.history,owner:d.owner,subcribe:d.subcribe,multi:d.multi,block:d.block},agent:{process:e=>{n.step(e)}}};n.step("Anchor decoded, ready to load.",()=>{L(g,o,e=>{if(e.error&&e.error.length!==0){let t="";for(let s=0;s<e.error.length;s++){let r=e.error[s];t+=`${r.level?r.level+":":""}${r.error}`}return n.step(t),delete e.error,n.step(`Result: ${JSON.stringify(e)}`),!1}n.step("Ready to show details",()=>{let t=e.location[1],s=e.location[0],r=`${s}_${t}`,a=e.data[r];if(n.html(`${s} on ${t.toLocaleString()}, signed by ${a.signer}`,"more"),!(e.call!==void 0||a.protocol.type==="app"))return n.step("Not application Anchor, the data as follow: ",()=>{n.step(`${JSON.stringify(a)}`)});n.step("Load successful,ready to run.",()=>{let c=e.libs&&e.libs.js?e.libs.js:"",i=e.code?e.code:"";if(e.resource&&e.raw){n.step("Combining the resouce files to application.");let l=n.groupResource(e.raw);for(var p in l)i=i.replaceAll(`anchor://${p}`,l[p])}try{let l=new Function("API","input","errs",c+i),v={container:"root",from:null,params:{},node:u.server},w={anchorJS:d},m=3;n.step(`Application loaded, run in ${m}s.`);let A=setInterval(()=>{if(m--,n.step(`Application loaded, run in ${m}s.`),m<0){if(clearInterval(A),e.libs&&e.libs.css){let N=e.libs.css,I=document.getElementsByTagName("head")[0],y=document.createElement("style"),k=document.createTextNode(N);y.appendChild(k),I.appendChild(y)}n.hide(["step","info"]),l(w,v,[])}},1e3)}catch(l){n.step("Failed to load cApp."),n.step(`Error: ${l}`)}})})})})})})});})();
//!important, This is the loader of launcher such as `Plinth`.
//!important, Need to build, the index.html not support hight version JS
